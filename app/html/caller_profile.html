<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Page Title-->
  <title>Caller Profile Page</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Our StyleSheet-->
  <link rel="stylesheet" href="/css/caller_profile.css">

  <!-- Icon libraries from https://fonts.google.com/icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link href="https://netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome.css" rel="stylesheet">

</head>

<body>

  <!-- Main Container-->
  <div class="container">
    <header>
      <!-- LOGO-->
      <div class="logo">
        <img src="/imgs/saveme.jpg" width="40px" alt="logo" />
        <h1>SaveMe</h1>
      </div>


      <!--HAMBURGER MENU FOR MOBILE-->

      <div class="hamburger-menu">
        <span><i class="material-icons">list</i></span>
      </div>

      <!-- TOP NAVIGATION -->
      <div class="nav">
        <ul>

          <li onclick="show(1)">
            <h3>Home</h3>
          </li>

          <li>
            <a href="/html/about_nav.html">About</a>
          </li>

          <li>
            <a href="/html/contact_nav.html">Contact</a>
          </li>

          <li>
            <form action="/logout" method="get">
              <input id="logout" type="submit" value="Logout" />
            </form>
          </li>

        </ul>

      </div>

    </header>


    <!-- BOTTOM NAVIGATION BAR MOBILE-->
    <div class="nav-mobile">
      <ul>

        <li>
          <span> <i class="material-icons">home</i></span>
          <h3>Home</h3>
        </li>

        <li>
          <span> <i class="material-icons">info</i></span>
          <h3>About</h3>
        </li>

        <li>
          <span> <i class="material-icons">call</i></span>
          <h3>Contact</h3>
        </li>

        <li class="active">
          <span> <i class="material-icons">account_circle</i></span>
          <h3>Account</h3>
        </li>

        <li>
          <span> <i class="material-icons">logout</i></span>
          <form action="/logout" method="get">
            <input id="logginout" type="submit" value="Logout" />
          </form>
        </li>

      </ul>
    </div>

    <!-- VERTICAL ICON NAVIGATION-->
    <div class="vert-bar">
      <span> <i class="material-icons">more_vert</i></span>
    </div>

    <!-- SIDEBAR NAVIGATION -->
    <aside class="sidebar">
      <!-- SIDEBAR CLOSE WHEN ON MOBILE-->
      <h1>SaveMe<span class="close"><i class="material-icons">close</i></span></h1>

      <div class="user-side">

        <div class="user-pic">

          <img id="userPicture" width="100" src="/imgs/saveme.jpg" alt="">

        </div>
        <!-- SIDE NAVIGATION USER INFORMATION-->
        <div class="user-info">

          <span id="sessionName" class="name">John Doe</span>

          <span id="sessionEmail" class="email">JohnDoe@gmail.com</span>

          <span class="status">Online</span>

        </div>

      </div>

      <!-- SIDE NAVIGATION GENERAL-->
      <div class="side-nav">
        <h2>General</h2>
        <nav>
          <ul>
            <li class="active" onclick="show(0)">
              <span><i class="material-icons">speed</i></span>
              <h3>Profile</h3>
            </li>
            <li onclick="show(1)">
              <span><i class="material-icons">star</i></span>
              <h3>Dashboard</h3>
            </li>
            <li onclick="show(2)">
              <span><i class="material-icons">comments</i></span>
              <h3>Reviews</h3>
            </li>
            <li onclick="show(3)">
              <span><i class="material-icons">settings</i></span>
              <h3>Settings</h3>
            </li>
          </ul>
        </nav>
      </div>
      <!-- BOTTOM NAVIGATION ICONS-->
      <div class="bt-nav">
        <ul>
          <li class="alert" title="Alert">
            <span><i class="material-icons">notifications</i></span>
          </li>
          <li class="message" title="Message">
            <span><i class="material-icons">message</i></span>
          </li>
          <li class="set" title="Settings">
            <span><i class="material-icons">settings</i></span>
          </li>
        </ul>
      </div>
    </aside>

    <!-- PROFILE CONTENT -->
    <div class="main">
      <section class="profile tabs">
        <h1>User Dashboard</h1>

        <div id="profiles" class="userpost">
          <div class="posts">
            <div class="profile" id="callForHelp">
              <img class="profilePicture" src="/imgs/call.png" width="40px" alt="logo">
              <p class="ticketName">Call for help</p>
            </div>
          </div>

          <div class="posts">
            <div class="profile" id="reportIncident">
              <img class="profilePicture" src="/imgs/report.png" width="40px" alt="logo">
              <p class="ticketName">Report incident</p>
            </div>
          </div>

          <div class="posts">
            <div class="profile" id="activeIncident">
              <img class="profilePicture" src="/imgs/incident.png" width="40px" alt="logo">
              <p class="ticketName">Active incident</p>
            </div>
          </div>

        </div>
      </section>

      <!-- DASHBOARD TABS-->
      <section class="tabs">
        <div id="user_profile_pictue"></div>
        <h1>User profile</h1>
        <div id="user_profile_section">
          <div id="container">
            <form id="upload-images-form">
              <input id="image-upload" type="file" value="Upload Image" accept="image/png, image/gif, image/jpeg"
                multiple="multiple" />
              <input id="submitProfilePhoto" type="submit" value="Save profile image" />
            </form>
          </div>
          <br><br>
          <form>
            <img width="200" src="/imgs/saveme.jpg" alt="">
            <p>First Name: </p>
            <div class="edit" id="detail_user_firstN" reqired>bank</div>
            <p>Last Name: </p>
            <div class="edit" id="detail_user_lastN">name</div>
            <p>Email: </p>
            <div class="edit" id="detail_user_email">email</div>
            <p>Password: </p>
            <div class="edit" id="detail_user_password">name</div>
            <p>Age: </p>
            <div class="edit" id="detail_user_age">age</div>
            <p>Gender: </p>
            <div class="edit" id="detail_user_gender">gender</div>
            <p>Phone Number: </p>
            <div class="edit" id="detail_user_cellphone">number</div>
            <p>Role: </p>
            <div class="edit" id="detail_user_role">role</div>
            <br><br>
            <span id="editUserStatus" class="status"></span>
            <br><br>
            <button type="button" id="edit-button">Edit</button>
            <button type="button" id="end-editing">Save</button>
          </form>
        </div>
      </section>

      <!-- REVIEWS TABS-->
      <section class="tabs">
        <h1>Reviews</h1>

        <p class="text">Lorem ipsum dolor, sit amet consectetur adipisicing elit.
          Quia recusandae laudantium odio!
          Iusto velit laboriosam perferendis ab!
          Aliquam ab odit animi autem cumque
          sit sint corporis quo. Voluptas, natus corporis?</p>
      </section>

      <!-- SETTINGS TABS-->
      <section class="tabs">
        <h1>Settings</h1>

        <p class="text">Lorem ipsum dolor, sit amet consectetur adipisicing elit.
          Quia recusandae laudantium odio!
          Iusto velit laboriosam perferendis ab!
          Aliquam ab odit animi autem cumque
          sit sint corporis quo. Voluptas, natus corporis?</p>
        <div id="container">
          <form id="upload-images-form">
            <input id="image-upload" type="file" value="Upload Image" accept="image/png, image/gif, image/jpeg"
              multiple="multiple" />
            <input id="submit" type="submit" value="Save profile image" />
          </form>
        </div>
      </section>

    </div>


    <!-- MODALS -->

    <!-- Call for help modal -->
    <div id="callForHelpModal" class="modal">
      <div class="edit-call-modal-content">
        <div id="modalContents">
          <h2>Call for help</h2>
          <br /><br />
          <div id="callcontext"> </div>
          <br /><br />
          <form>
            <!-- <label class="icon" for="email"><i class="icon-envelope "></i></label> -->
            <input type="text" name="email" id="title" placeholder="Title"/>
            <br>
            <p>Please select one that desribes your situation </p>
            <div class="Priority">
              <input type="radio" value="URGENT" id="urgent" name="Priority"/>
              <label for="urgent" class="radio" chec>Urgent</label>
              <input type="radio" value="HIGH" id="high" name="Priority" />
              <label for="high" class="radio">High</label>
              <input type="radio" value="MEDIUM" id="medium" name="Priority" />
              <label for="medium" class="radio">Medium</label>
              <input type="radio" value="LOW" id="low" name="Priority" />
              <label for="low" class="radio">Low</label>
            </div>

            <p>Please select one that descirbes the type of an incidnet</p>
            <div class="InciType">
              <input type="radio" value="HARASSMENT" id="harrasment" name="InciType" />
              <label for="harrasment" class="radio" chec>Harrasment</label>
              <input type="radio" value="SUSACTIVITY" id="susactivity" name="InciType" />
              <label for="susactivity" class="radio">Suspicious Activity</label>
              <input type="radio" value="VIOLENCE" id="violence" name="InciType" />
              <label for="violence" class="radio">Violence</label>
            </div>

            <!-- <label class="icon" for="password"><i class="icon-shield"></i></label> -->
            <input type="text" name="name" id="description" placeholder="Description" />

            <div id="map"></div>
            <div>user location: </div>
            <p>user's latitude: </p>
            <div id="user_lat"></div>
            <p>user's longitude: </p>
            <div id="user_lng"></div>


            <input type="button" class="callForHelpModalCancelButton" id="cancel" value="Cancel" />
            <input type="button" class="submitButton" id="callSubmit" value="Submit" />
          </form>

        </div>
      </div>
    </div>

    <!-- Report Incident modal -->
    <div id="reportIncidentModal" class="modal">
      <div class="edit-report-modal-content">
        <div id="modalContents">
          <h2>Report incident</h2>
          <br /><br />
          <div id="reportContext"> </div>
          <br /><br />
          <form>
            <input type="button" class="reportIncidentModalCancelButton" id="cancel" value="Cancel" /> // id is using twice, so changed temporarry
            <input type="button" class="submitButton" id="submit" value="Submit" /> // id is using twice, so changed temporarry
          </form>

        </div>
      </div>
    </div>

    <!-- Active Incident modal -->
    <div id="activeIncidentModal" class="modal">
      <div class="edit-active-modal-content">
        <div id="modalContents">
          <h2>Active incident</h2>
          <br /><br />
          <div id="activeContext"> </div>
          <br /><br />
          <form>
            <input type="button" class="activeIncidentModalCancelButton" id="cancel" value="Cancel" /> // id is using twice, so changed temporarry
            <input type="button" class="submitButton" id="submit" value="Submit" /> // id is using twice, so changed temporarry
          </form>

        </div>
      </div>
    </div>

  </div>
  <!-- SCRIPT FOLDER-->
  <script src="/js/caller_dashboard.js"></script>
  <script src="/js/caller_profile_edit.js"></script>
  <script src="/js/caller_profile.js"></script>
  <script src="/js/caller_profile_upload_photo.js"></script>
  <script src="/js/call_for_help.js"></script>
  

  <!-- JQuery-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

  <!--DISPLAY NAVIGATION ON MOBILE-->
  <script>
    const tbtn = document.querySelectorAll(".side-nav ul li");
    const tab = document.querySelectorAll(".tabs");

    function show(panelIndex) {
      tab.forEach(function (node) {
        node.style.display = "none";
      })
      tab[panelIndex].style.display = "block";
    }

    show(0)
  </script>

  <!--DISPLAY NAVIGATION ON MOBILE-->
  <script>
    $(".side-nav ul li").click(function () {
      $(this).addClass("active").siblings().removeClass("active");
    })
  </script>

  <!--DISPLAY NAVIGATION ON MOBILE-->
  <script>
    const hMenu = document.querySelector(".hamburger-menu");

    const navM = document.querySelector(".nav-mobile");

    hMenu.addEventListener("click", (nav) => {

      navM.classList.toggle("show");
    })
  </script>

  <!--DISPLAY NAVIGATION ON MOBILE-->
  <script>
    const Vbar = document.querySelector(".vert-bar");

    const aside = document.querySelector(".sidebar");

    const close = document.querySelector(".close");

    Vbar.addEventListener("click", () => {
      aside.classList.add("show");
    })

    close.addEventListener("click", () => {
      aside.classList.remove("show");
    })
  </script>

  <script>
    // Note: This example requires that you consent to location sharing when
    // prompted by your browser. If you see the error "The Geolocation service
    // failed.", it means you probably did not give permission for the browser to
    // locate you.
    let map, infoWindow;

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: {
          lat: 49.2827,
          lng: -123.1207
        },
        zoom: 11,
      });
      infoWindow = new google.maps.InfoWindow();

      const locationButton = document.createElement("input");
      const message = "SOS";
      locationButton.type = "button";
      locationButton.value = "SOS";
      locationButton.id = "test"
     
      locationButton.classList.add("custom-map-control-button");
      map.controls[google.maps.ControlPosition.TOP_CENTER].push(locationButton);
      locationButton.addEventListener("click", () => {
        // Try HTML5 geolocation.
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              const pos = {
                lat: position.coords.latitude,
                lng: position.coords.longitude,
              };

              console.log(pos);

              infoWindow.setPosition(pos);
              infoWindow.setContent(
                "Incident occured. Your location has been shared to our responders. The closest responder to you will be there."
              );
              infoWindow.open(map);
            
              document.getElementById("user_lat").innerHTML = pos.lat;
              document.getElementById("user_lng").innerHTML = pos.lng;
              map.setCenter(pos);
            },
            () => {
              handleLocationError(true, infoWindow, map.getCenter());
            }
          );
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      });
    }

    function handleLocationError(browserHasGeolocation, infoWindow, pos) {
      infoWindow.setPosition(pos);
      infoWindow.setContent(
        browserHasGeolocation ?
        "Error: The Geolocation service failed." :
        "Error: Your browser doesn't support geolocation."
      );
      infoWindow.open(map);
    }

    window.initMap = initMap;
  </script>
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDhdF0gCXSvOcoKp4tIfwQmDytBQo8SWf8&callback=initMap">
  </script>


</body>

</html>